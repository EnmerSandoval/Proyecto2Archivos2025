<div class="container py-4">
  <h2 class="mb-3">Mis productos</h2>

  <form [formGroup]="form" (ngSubmit)="submit()" class="row g-2 align-items-end mb-3">
    <div class="col-12 col-md-6">
      <label class="form-label">Buscar</label>
      <input class="form-control" formControlName="q" placeholder="Nombre o descripción…">
    </div>

    <div class="col-12 col-md-3">
      <label class="form-label">Estado</label>
      <select class="form-select" formControlName="estado">
        <option [ngValue]="null">Todos</option>
        <option value="pendiente">Pendiente</option>
        <option value="aprobado">Aprobado</option>
        <option value="rechazado">Rechazado</option>
        <option value="suspendido">Suspendido</option>
      </select>
    </div>

    <div class="col-12 col-md-3">
      <button class="btn btn-primary w-100" type="submit" [disabled]="loading()">Buscar</button>
    </div>
  </form>

  <div *ngIf="error()" class="alert alert-danger">{{ error() }}</div>

  <div *ngIf="loading()" class="text-muted">Cargando…</div>

  <div *ngIf="!loading() && items().length === 0" class="text-muted">
    No hay resultados.
  </div>

  <div class="row g-3">
    <div class="col-12 col-sm-6 col-md-4 col-lg-3" *ngFor="let p of items()">
      <app-producto-card [p]="p"></app-producto-card>
    </div>
  </div>

  <div class="d-flex justify-content-between align-items-center mt-3" *ngIf="totalPages() > 1">
    <button class="btn btn-outline-secondary" (click)="prev()" [disabled]="page() === 0">Anterior</button>
    <span>Página {{ page() + 1 }} de {{ totalPages() }}</span>
    <button class="btn btn-outline-secondary" (click)="next()" [disabled]="page() + 1 >= totalPages()">Siguiente</button>
  </div>
</div>
